// This is your Prisma schema file.
// Learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Empresa {
  idEmpresa   Int      @id @default(autoincrement())
  nome        String?
  cnpj        String?
  telefone    String?
  maquinas    Maquina[]
  funcionarios Funcionario[]
  enderecos    Endereco[]
  telefones   Telefone[]
}

model Maquina {
  id           Int           @id @default(autoincrement())
  numSerie     String?
  nome         String?
  modelo       String?
  local        String?
  descComponentes String?
  Empresa_idEmpresa Int
  empresa      Empresa       @relation(fields: [Empresa_idEmpresa], references: [idEmpresa])
  especificacoes Especificacoes[]
  dados        Dados[]
  historicos   Historico[]
}

model Funcionario {
  id         Int      @id @default(autoincrement())
  nome       String?
  email      String?
  senha      String?
  cpf        String?
  cargo      String?
  privilegio String?
  fkEmpresa  Int
  empresa    Empresa  @relation(fields: [fkEmpresa], references: [idEmpresa])
}

model Endereco {
  idEndereco Int      @id @default(autoincrement())
  logradouro String?
  cep        String?
  bairro     String
  numero     String?
  estado     String?
  fkEmpresa  Int
  empresa    Empresa  @relation(fields: [fkEmpresa], references: [idEmpresa])
}

model Telefone {
  id       Int      @id @default(autoincrement())
  numero   String?
  Empresa_idEmpresa Int
  empresa  Empresa  @relation(fields: [Empresa_idEmpresa], references: [idEmpresa])
}

model Componente {
  idComponente    Int      @id @default(autoincrement())
  marca           String?
  compatibilidade String?
  dataVencimento  String?
  especificacoes  Especificacoes[]
  dados           Dados[]
  historicos      Historico[]
}

model Especificacoes {
  idEspecificacoes Int       @id @default(autoincrement())
  fkMaquina        Int
  fkComponente     Int
  tipo             String?
  maquina          Maquina   @relation(fields: [fkMaquina], references: [id])
  componente       Componente @relation(fields: [fkComponente], references: [idComponente])
  dados            Dados[]
  historicos       Historico[]
}

model Dados {
  idDados         Int      @id @default(autoincrement())
  descricao        String?
  valor            String?
  unidadeMedida    String?
  fkEspecificacoes Int
  fkMaquina        Int
  fkComponente     Int
  maquina          Maquina     @relation(fields: [fkMaquina], references: [id])
  especificacoes   Especificacoes @relation(fields: [fkEspecificacoes], references: [idEspecificacoes])
  componente       Componente     @relation(fields: [fkComponente], references: [idComponente])
}

model Historico {
  idHistorico      Int      @id @default(autoincrement())
  fkMaquina        Int
  fkEspecificacoes Int
  fkComponente     Int
  dataHora         DateTime?
  nome             String?
  leitura          String?
  unidadeMedida    String?
  maquina          Maquina       @relation(fields: [fkMaquina], references: [id])
  especificacoes   Especificacoes @relation(fields: [fkEspecificacoes], references: [idEspecificacoes])
  componente       Componente     @relation(fields: [fkComponente], references: [idComponente])
}
